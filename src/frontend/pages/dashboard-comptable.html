<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Comptable - Gestion des Frais</title>
    <link rel="stylesheet" href="../styles/index.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  </head>
  <body class="bg-background">
    <div class="flex h-screen overflow-hidden">
      <!-- Sidebar Container -->
      <div id="sidebar-container"></div>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header Container -->
        <div id="header-container"></div>

        <!-- Dashboard Content -->
        <main class="flex-1 overflow-y-auto p-4 md:p-6 space-y-6">
          <!-- Welcome Section -->
          <div>
            <h1 class="text-2xl font-bold">Tableau de bord comptable</h1>
            <p class="text-muted-foreground">
              Vue d'ensemble de la validation des frais
            </p>
          </div>

          <!-- Stats Cards -->
          <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <!-- En attente de validation -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  En attente
                </p>
                <i
                  data-lucide="clock"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p class="text-2xl font-bold" id="stat-en-attente">0</p>
              <div class="h-2 bg-muted rounded-full overflow-hidden">
                <div
                  id="progress-en-attente"
                  class="h-full bg-chart-pending rounded-full transition-all"
                ></div>
              </div>
              <p class="text-xs text-muted-foreground">Frais à valider</p>
            </div>

            <!-- Montant total en attente -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Montant en attente
                </p>
                <i data-lucide="euro" class="w-4 h-4 text-muted-foreground"></i>
              </div>
              <p class="text-2xl font-bold" id="stat-montant-attente">0.00 €</p>
              <p class="text-xs text-muted-foreground">Total à valider</p>
            </div>

            <!-- Validés ce mois -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Validés ce mois
                </p>
                <i
                  data-lucide="check-circle"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p class="text-2xl font-bold" id="stat-valides">0</p>
              <div class="h-2 bg-muted rounded-full overflow-hidden">
                <div
                  id="progress-valides"
                  class="h-full bg-chart-validated rounded-full transition-all"
                ></div>
              </div>
              <p class="text-xs text-muted-foreground">
                +<span id="stat-valides-change">0</span>% vs mois dernier
              </p>
            </div>

            <!-- Refusés ce mois -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">Refusés</p>
                <i
                  data-lucide="x-circle"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p
                class="text-2xl font-bold text-chart-refused"
                id="stat-refuses"
              >
                0
              </p>
              <p class="text-xs text-muted-foreground">Ce mois</p>
            </div>
          </div>

          <!-- Charts Row -->
          <div class="grid gap-4 md:grid-cols-2">
            <!-- Évolution des validations -->
            <div class="bg-card rounded-lg border p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Évolution des validations</h3>
                <select
                  id="period-select"
                  class="text-sm border rounded px-2 py-1"
                >
                  <option value="month">Ce mois</option>
                  <option value="quarter">Ce trimestre</option>
                  <option value="year">Cette année</option>
                </select>
              </div>
              <div class="h-[250px]">
                <canvas id="validation-chart"></canvas>
              </div>
            </div>

            <!-- Répartition par statut -->
            <div class="bg-card rounded-lg border p-6">
              <h3 class="text-lg font-semibold mb-4">Répartition par statut</h3>
              <div class="h-[250px]">
                <canvas id="status-chart"></canvas>
              </div>
            </div>
          </div>

          <!-- Frais en attente de validation -->
          <div class="bg-card rounded-lg border p-6">
            <div class="flex items-center justify-between mb-4">
              <h3 class="text-lg font-semibold">
                Frais en attente de validation
              </h3>
              <button
                id="voir-tous-validation-btn"
                class="text-sm text-primary hover:underline flex items-center gap-1"
              >
                Voir tous les frais
                <i data-lucide="arrow-right" class="w-4 h-4"></i>
              </button>
            </div>
            <div class="space-y-4" id="pending-expenses">
              <!-- Les frais en attente seront insérés ici -->
              <div
                class="flex items-center justify-center py-8 text-muted-foreground"
              >
                <p>Chargement des frais...</p>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="bg-card rounded-lg border p-6">
            <h3 class="text-lg font-semibold mb-4">Actions rapides</h3>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-4">
              <button
                id="validation-queue-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-(--chart-pending)/20 flex items-center justify-center"
                >
                  <i
                    data-lucide="list-checks"
                    class="w-5 h-5 text-chart-pending"
                  ></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">File de validation</p>
                  <p class="text-xs text-muted-foreground">Valider en masse</p>
                </div>
              </button>

              <button
                id="all-expenses-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center"
                >
                  <i data-lucide="receipt" class="w-5 h-5 text-primary"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Tous les frais</p>
                  <p class="text-xs text-muted-foreground">
                    Historique complet
                  </p>
                </div>
              </button>

              <button
                id="rapport-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-info/20 flex items-center justify-center"
                >
                  <i data-lucide="file-text" class="w-5 h-5 text-info"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Rapports</p>
                  <p class="text-xs text-muted-foreground">Export & analyses</p>
                </div>
              </button>

              <button
                id="aide-comptable-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-success/20 flex items-center justify-center"
                >
                  <i data-lucide="help-circle" class="w-5 h-5 text-success"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Aide</p>
                  <p class="text-xs text-muted-foreground">Documentation</p>
                </div>
              </button>
            </div>
          </div>
        </main>

        <!-- Footer Container -->
        <div id="footer-container"></div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="module" src="../scripts/dashboard-comptable.ts"></script>
  </body>
</html>
