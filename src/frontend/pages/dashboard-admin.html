<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Dashboard Administrateur - Gestion des Frais</title>
    <link rel="stylesheet" href="../styles/index.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
  </head>
  <body class="bg-background">
    <div class="flex h-screen overflow-hidden">
      <!-- Sidebar Container -->
      <div id="sidebar-container"></div>

      <!-- Main Content -->
      <div class="flex-1 flex flex-col overflow-hidden">
        <!-- Header Container -->
        <div id="header-container"></div>

        <!-- Dashboard Content -->
        <main class="flex-1 overflow-y-auto p-4 md:p-6 space-y-6">
          <!-- Welcome Section -->
          <div>
            <h1 class="text-2xl font-bold">Tableau de bord administrateur</h1>
            <p class="text-muted-foreground">
              Vue d'ensemble complète du système
            </p>
          </div>

          <!-- Stats Cards -->
          <div class="grid gap-4 md:grid-cols-2 lg:grid-cols-4">
            <!-- Total utilisateurs -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Utilisateurs
                </p>
                <i
                  data-lucide="users"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p class="text-2xl font-bold" id="stat-users">0</p>
              <p class="text-xs text-muted-foreground">
                +<span id="stat-users-new">0</span> ce mois
              </p>
            </div>

            <!-- Total frais -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Total frais
                </p>
                <i
                  data-lucide="receipt"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p class="text-2xl font-bold" id="stat-expenses">0</p>
              <p class="text-xs text-muted-foreground">Ce mois</p>
            </div>

            <!-- Montant total -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Montant total
                </p>
                <i data-lucide="euro" class="w-4 h-4 text-muted-foreground"></i>
              </div>
              <p class="text-2xl font-bold" id="stat-amount">0.00 €</p>
              <div class="h-2 bg-muted rounded-full overflow-hidden">
                <div
                  id="progress-amount"
                  class="h-full bg-primary rounded-full transition-all"
                ></div>
              </div>
              <p class="text-xs text-muted-foreground">Ce mois</p>
            </div>

            <!-- Chantiers actifs -->
            <div class="bg-card rounded-lg border p-6 space-y-2">
              <div class="flex items-center justify-between">
                <p class="text-sm font-medium text-muted-foreground">
                  Chantiers actifs
                </p>
                <i
                  data-lucide="building"
                  class="w-4 h-4 text-muted-foreground"
                ></i>
              </div>
              <p class="text-2xl font-bold" id="stat-chantiers">0</p>
              <p class="text-xs text-muted-foreground">En cours</p>
            </div>
          </div>

          <!-- Charts Row -->
          <div class="grid gap-4 md:grid-cols-2">
            <!-- Évolution mensuelle -->
            <div class="bg-card rounded-lg border p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Évolution mensuelle</h3>
                <select
                  id="chart-type-select"
                  class="text-sm border rounded px-2 py-1"
                >
                  <option value="expenses">Frais</option>
                  <option value="amount">Montants</option>
                </select>
              </div>
              <div class="h-[250px]">
                <canvas id="monthly-chart"></canvas>
              </div>
            </div>

            <!-- Répartition par rôle -->
            <div class="bg-card rounded-lg border p-6">
              <h3 class="text-lg font-semibold mb-4">Répartition par rôle</h3>
              <div class="h-[250px]">
                <canvas id="role-chart"></canvas>
              </div>
            </div>
          </div>

          <!-- Activity & Users -->
          <div class="grid gap-4 md:grid-cols-2">
            <!-- Recent Activity -->
            <div class="bg-card rounded-lg border p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Activité récente</h3>
                <button
                  id="voir-logs-btn"
                  class="text-sm text-primary hover:underline"
                >
                  Voir tout
                </button>
              </div>
              <div class="space-y-4" id="recent-activity">
                <div
                  class="flex items-center justify-center py-8 text-muted-foreground"
                >
                  <p>Chargement...</p>
                </div>
              </div>
            </div>

            <!-- New Users -->
            <div class="bg-card rounded-lg border p-6">
              <div class="flex items-center justify-between mb-4">
                <h3 class="text-lg font-semibold">Nouveaux utilisateurs</h3>
                <button
                  id="voir-users-btn"
                  class="text-sm text-primary hover:underline"
                >
                  Voir tous
                </button>
              </div>
              <div class="space-y-4" id="new-users">
                <div
                  class="flex items-center justify-center py-8 text-muted-foreground"
                >
                  <p>Chargement...</p>
                </div>
              </div>
            </div>
          </div>

          <!-- System Status -->
          <div class="bg-card rounded-lg border p-6">
            <h3 class="text-lg font-semibold mb-4">État du système</h3>
            <div class="grid gap-4 md:grid-cols-3">
              <div class="flex items-center gap-3 p-3 rounded-lg bg-accent">
                <div
                  class="w-10 h-10 rounded-full bg-success/20 flex items-center justify-center"
                >
                  <i data-lucide="check" class="w-5 h-5 text-success"></i>
                </div>
                <div>
                  <p class="font-medium">Base de données</p>
                  <p class="text-sm text-muted-foreground">Opérationnelle</p>
                </div>
              </div>

              <div class="flex items-center gap-3 p-3 rounded-lg bg-accent">
                <div
                  class="w-10 h-10 rounded-full bg-success/20 flex items-center justify-center"
                >
                  <i data-lucide="check" class="w-5 h-5 text-success"></i>
                </div>
                <div>
                  <p class="font-medium">Services</p>
                  <p class="text-sm text-muted-foreground">Tous en ligne</p>
                </div>
              </div>

              <div class="flex items-center gap-3 p-3 rounded-lg bg-accent">
                <div
                  class="w-10 h-10 rounded-full bg-info/20 flex items-center justify-center"
                >
                  <i data-lucide="server" class="w-5 h-5 text-info"></i>
                </div>
                <div>
                  <p class="font-medium">Stockage</p>
                  <p class="text-sm text-muted-foreground">
                    <span id="storage-used">0</span> MB utilisés
                  </p>
                </div>
              </div>
            </div>
          </div>

          <!-- Quick Actions -->
          <div class="bg-card rounded-lg border p-6">
            <h3 class="text-lg font-semibold mb-4">Actions rapides</h3>
            <div class="grid gap-3 md:grid-cols-2 lg:grid-cols-4">
              <button
                id="users-admin-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-primary/20 flex items-center justify-center"
                >
                  <i data-lucide="users" class="w-5 h-5 text-primary"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Utilisateurs</p>
                  <p class="text-xs text-muted-foreground">Gestion complète</p>
                </div>
              </button>

              <button
                id="chantiers-admin-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-info/20 flex items-center justify-center"
                >
                  <i data-lucide="building" class="w-5 h-5 text-info"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Chantiers</p>
                  <p class="text-xs text-muted-foreground">Gestion & suivi</p>
                </div>
              </button>

              <button
                id="tarifs-admin-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-success/20 flex items-center justify-center"
                >
                  <i data-lucide="calculator" class="w-5 h-5 text-success"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Tarifs</p>
                  <p class="text-xs text-muted-foreground">
                    Grilles tarifaires
                  </p>
                </div>
              </button>

              <button
                id="parametres-admin-btn"
                class="flex items-center gap-3 p-3 rounded-lg border hover:bg-accent transition-colors"
              >
                <div
                  class="w-10 h-10 rounded-full bg-warning/20 flex items-center justify-center"
                >
                  <i data-lucide="settings" class="w-5 h-5 text-warning"></i>
                </div>
                <div class="text-left">
                  <p class="font-medium">Paramètres</p>
                  <p class="text-xs text-muted-foreground">Configuration</p>
                </div>
              </button>
            </div>
          </div>
        </main>

        <!-- Footer Container -->
        <div id="footer-container"></div>
      </div>
    </div>

    <!-- Scripts -->
    <script src="https://unpkg.com/lucide@latest"></script>
    <script type="module" src="../scripts/dashboard-admin.ts"></script>
  </body>
</html>
